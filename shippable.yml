language: none

env:
  - IMAGE_NAME=harryi3t/busybox

build:
  ci:
    - echo "Let's build some cool stuff"
    - sudo docker build --rm -t=$IMAGE_NAME:$BRANCH.$SHIPPABLE_BUILD_NUMBER .

  post_ci:
    -  sudo docker push $IMAGE_NAME:$BRANCH.$SHIPPABLE_BUILD_NUMBER

integrations:
  hub:
    - integrationName: "dockerhub"
      type: docker
  notifications:
    - integrationName: triggerResource
      type: webhook
      payload:
        - resourceId=20
        - versionName=$BRANCH.$SHIPPABLE_BUILD_NUMBER
      on_success: always
      on_failure: always
      on_start: always
      on_pull_request: always
